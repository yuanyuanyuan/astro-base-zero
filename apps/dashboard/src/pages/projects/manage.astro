---
// 项目管理页 - 静态版本，兼容 GitHub Pages
import DashboardLayout from '../../layouts/DashboardLayout.astro';

// 这是一个静态的项目管理指南页面
// 提供完整的 CLI 工具使用说明和项目操作指南
---

<DashboardLayout title="项目管理" description="使用 CLI 工具管理你的 Astro 项目">
  <!-- 提示信息 -->
  <div class="mb-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
    <div class="flex items-start">
      <div class="flex-shrink-0">
        <svg class="w-5 h-5 text-blue-400 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-blue-800">
          静态模式下的项目管理
        </h3>
        <div class="mt-2 text-sm text-blue-700">
          <p>
            在 GitHub Pages 等静态环境中，项目管理通过本地 CLI 工具完成。
            下面是管理项目的完整指南。
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- 项目管理说明 -->
  <div class="mb-6 bg-secondary-50 rounded-lg p-4">
    <p class="text-sm text-secondary-700">
      <strong>项目管理中心:</strong> 使用 CLI 工具管理所有 Astro 项目
    </p>
    <p class="text-xs text-secondary-500 mt-1">
      下面的命令适用于任何通过 astro-zero CLI 创建的项目
    </p>
  </div>

  <!-- 项目状态概览 -->
  <div id="projectStatusOverview" class="mb-8 bg-white rounded-lg border border-secondary-200 p-6">
    <h2 class="text-xl font-semibold text-secondary-900 mb-6">📊 本地项目状态</h2>
    
    <!-- 加载状态 -->
    <div id="statusLoading" class="text-center py-8">
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
      <p class="text-sm text-secondary-600 mt-2">正在扫描本地项目...</p>
    </div>
    
    <!-- 项目统计 -->
    <div id="projectStats" class="hidden grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
        <div class="text-2xl font-bold text-blue-600" id="totalProjects">0</div>
        <div class="text-sm text-blue-700">总项目数</div>
      </div>
      <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center">
        <div class="text-2xl font-bold text-green-600" id="activeProjects">0</div>
        <div class="text-sm text-green-700">活跃项目</div>
      </div>
      <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 text-center">
        <div class="text-2xl font-bold text-purple-600" id="recentProjects">0</div>
        <div class="text-sm text-purple-700">最近活跃</div>
      </div>
      <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 text-center">
        <div class="text-2xl font-bold text-orange-600" id="draftProjects">0</div>
        <div class="text-sm text-orange-700">草稿项目</div>
      </div>
    </div>
    
    <!-- 最近项目列表 -->
    <div id="recentProjectsList" class="hidden">
      <h3 class="text-lg font-medium text-secondary-900 mb-4">最近更新的项目</h3>
      <div id="recentProjectsContainer" class="space-y-3">
        <!-- 动态填充 -->
      </div>
    </div>
    
    <!-- 无项目状态 -->
    <div id="noProjects" class="hidden text-center py-8">
      <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
        </svg>
      </div>
      <h3 class="text-lg font-medium text-secondary-900 mb-2">还没有项目</h3>
      <p class="text-sm text-secondary-600 mb-4">使用下面的智能命令构建器创建您的第一个项目</p>
      <button 
        onclick="scrollToCommandBuilder()"
        class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors"
      >
        开始创建项目
      </button>
    </div>
  </div>

  <!-- 智能命令构建器 -->
  <div class="bg-white rounded-lg border border-secondary-200 p-6 mb-8">
    <h2 class="text-xl font-semibold text-secondary-900 mb-6">🎯 智能命令构建器</h2>
    
    <!-- 项目类型选择 -->
    <div class="mb-6">
      <label class="block text-sm font-medium text-secondary-700 mb-3">选择项目类型:</label>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <button 
          onclick="selectProjectType('base')"
          class="project-type-btn text-left p-4 border border-secondary-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all"
          data-type="base"
        >
          <div class="flex items-center mb-2">
            <div class="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-4 h-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
            </div>
            <h3 class="font-medium text-secondary-900">基础站点</h3>
          </div>
          <p class="text-sm text-secondary-600">适用于企业官网、产品展示等静态站点</p>
        </button>

        <button 
          onclick="selectProjectType('blog')"
          class="project-type-btn text-left p-4 border border-secondary-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all"
          data-type="blog"
        >
          <div class="flex items-center mb-2">
            <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-4 h-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
            </div>
            <h3 class="font-medium text-secondary-900">博客站点</h3>
          </div>
          <p class="text-sm text-secondary-600">包含文章管理、分类标签等博客功能</p>
        </button>

        <button 
          onclick="selectProjectType('tool')"
          class="project-type-btn text-left p-4 border border-secondary-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all"
          data-type="tool"
        >
          <div class="flex items-center mb-2">
            <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-4 h-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
            </div>
            <h3 class="font-medium text-secondary-900">在线工具</h3>
          </div>
          <p class="text-sm text-secondary-600">交互式工具展示，包含组件和演示功能</p>
        </button>
      </div>
    </div>

    <!-- 个性化设置 -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div>
        <label for="projectName" class="block text-sm font-medium text-secondary-700 mb-2">项目名称:</label>
        <input 
          type="text" 
          id="projectName"
          placeholder="my-awesome-project"
          class="w-full px-3 py-2 border border-secondary-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          oninput="updateCommands()"
        >
      </div>
      
      <div>
        <label for="deployTarget" class="block text-sm font-medium text-secondary-700 mb-2">部署目标:</label>
        <select 
          id="deployTarget"
          class="w-full px-3 py-2 border border-secondary-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          onchange="updateCommands()"
        >
          <option value="github-pages">GitHub Pages</option>
          <option value="netlify">Netlify</option>
          <option value="vercel">Vercel</option>
        </select>
      </div>
    </div>

    <!-- 生成的命令展示 -->
    <div id="generatedCommands" class="bg-gray-50 border border-secondary-200 rounded-lg p-6">
      <h3 class="text-lg font-medium text-secondary-900 mb-4">📋 为您生成的命令:</h3>
      
      <!-- 项目创建命令 -->
      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <h4 class="font-medium text-secondary-800">1. 创建项目</h4>
          <button 
            onclick="copyGeneratedCommand('create')"
            class="text-sm text-blue-600 hover:text-blue-800 transition-colors"
          >
            复制命令
          </button>
        </div>
        <div id="createCommand" class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm">
          <code>请先选择项目类型和填写项目名称</code>
        </div>
      </div>

      <!-- 项目开发命令 -->
      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <h4 class="font-medium text-secondary-800">2. 开始开发</h4>
          <button 
            onclick="copyGeneratedCommand('dev')"
            class="text-sm text-blue-600 hover:text-blue-800 transition-colors"
          >
            复制命令
          </button>
        </div>
        <div id="devCommand" class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm">
          <code>cd your-project && npm run dev</code>
        </div>
      </div>

      <!-- 部署命令 -->
      <div class="mb-4">
        <div class="flex items-center justify-between mb-2">
          <h4 class="font-medium text-secondary-800">3. 构建部署</h4>
          <button 
            onclick="copyGeneratedCommand('deploy')"
            class="text-sm text-blue-600 hover:text-blue-800 transition-colors"
          >
            复制命令
          </button>
        </div>
        <div id="deployCommand" class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm">
          <code>npm run build</code>
        </div>
      </div>

      <!-- 项目类型特定提示 -->
      <div id="typeSpecificTips" class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4">
        <h4 class="font-medium text-blue-800 mb-2">💡 项目类型特定提示:</h4>
        <p class="text-sm text-blue-700">选择项目类型后，这里会显示相应的最佳实践建议。</p>
      </div>

      <!-- 基于项目状态的智能建议 -->
      <div id="smartSuggestions" class="hidden bg-amber-50 border border-amber-200 rounded-lg p-4 mt-4">
        <h4 class="font-medium text-amber-800 mb-2">🧠 智能建议:</h4>
        <div id="suggestionsContent" class="text-sm text-amber-700">
          <!-- 动态填充基于项目状态的建议 -->
        </div>
      </div>
    </div>
  </div>

  <!-- 项目操作指南 -->
  <div class="space-y-8">
    <!-- 本地项目管理 -->
    <div class="bg-white rounded-lg border border-secondary-200 p-6">
      <h2 class="text-xl font-semibold text-secondary-900 mb-6">📋 本地项目管理</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-lg font-medium text-secondary-900 mb-3">查看所有项目</h3>
          <div class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm mb-3">
            <code>astro-zero list</code>
          </div>
          <p class="text-sm text-secondary-600">列出所有通过 CLI 创建的项目及其状态</p>
        </div>

        <div>
          <h3 class="text-lg font-medium text-secondary-900 mb-3">项目详细信息</h3>
          <div class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm mb-3">
            <code>astro-zero info &lt;project-name&gt;</code>
          </div>
          <p class="text-sm text-secondary-600">查看特定项目的详细配置和元数据</p>
        </div>
      </div>
    </div>

    <!-- 项目操作命令 -->
    <div class="bg-white rounded-lg border border-secondary-200 p-6">
      <h2 class="text-xl font-semibold text-secondary-900 mb-6">🚀 项目操作命令</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
        <!-- 开发服务器 -->
        <div class="border border-secondary-200 rounded-lg p-4">
          <div class="flex items-center mb-3">
            <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-5 h-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M19 10a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h3 class="font-medium text-secondary-900">开发预览</h3>
              <p class="text-xs text-secondary-500">启动开发服务器</p>
            </div>
          </div>
          <div class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm mb-3 relative">
            <code>cd /path/to/project<br/>npm run dev</code>
            <button 
              onclick="copyCommand('cd /path/to/project && npm run dev')"
              class="absolute top-2 right-2 text-secondary-400 hover:text-green-400 transition-colors"
              title="复制命令"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
            </button>
          </div>
          <p class="text-sm text-secondary-600">在本地启动开发服务器，通常在 http://localhost:4321</p>
        </div>

        <!-- 项目构建 -->
        <div class="border border-secondary-200 rounded-lg p-4">
          <div class="flex items-center mb-3">
            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-5 h-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
            </div>
            <div>
              <h3 class="font-medium text-secondary-900">构建项目</h3>
              <p class="text-xs text-secondary-500">生成生产版本</p>
            </div>
          </div>
          <div class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm mb-3 relative">
            <code>cd /path/to/project<br/>npm run build</code>
            <button 
              onclick="copyCommand('cd /path/to/project && npm run build')"
              class="absolute top-2 right-2 text-secondary-400 hover:text-green-400 transition-colors"
              title="复制命令"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
            </button>
          </div>
          <p class="text-sm text-secondary-600">构建静态文件到 dist/ 目录，用于生产部署</p>
        </div>

        <!-- 预览构建 -->
        <div class="border border-secondary-200 rounded-lg p-4">
          <div class="flex items-center mb-3">
            <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-5 h-5 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
              </svg>
            </div>
            <div>
              <h3 class="font-medium text-secondary-900">预览构建</h3>
              <p class="text-xs text-secondary-500">本地预览生产版本</p>
            </div>
          </div>
          <div class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm mb-3 relative">
            <code>cd /path/to/project<br/>npm run preview</code>
            <button 
              onclick="copyCommand('cd /path/to/project && npm run preview')"
              class="absolute top-2 right-2 text-secondary-400 hover:text-green-400 transition-colors"
              title="复制命令"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
            </button>
          </div>
          <p class="text-sm text-secondary-600">在本地预览构建后的静态站点</p>
        </div>

        <!-- GitHub Pages 部署 -->
        <div class="border border-secondary-200 rounded-lg p-4">
          <div class="flex items-center mb-3">
            <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-5 h-5 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
              </svg>
            </div>
            <div>
              <h3 class="font-medium text-secondary-900">部署到 GitHub Pages</h3>
              <p class="text-xs text-secondary-500">发布到 GitHub Pages</p>
            </div>
          </div>
          <div class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-sm mb-3 relative">
            <code>npm run build<br/>git add dist && git commit -m "Deploy"<br/>git push origin main</code>
            <button 
              onclick="copyCommand('npm run build && git add dist && git commit -m &quot;Deploy&quot; && git push origin main')"
              class="absolute top-2 right-2 text-secondary-400 hover:text-green-400 transition-colors"
              title="复制命令"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
            </button>
          </div>
          <p class="text-sm text-secondary-600">构建并部署到 GitHub Pages（需要配置 GitHub Actions）</p>
        </div>
      </div>
    </div>

    <!-- 快速操作指南 -->
    <div class="bg-white rounded-lg border border-secondary-200 p-6">
      <h2 class="text-xl font-semibold text-secondary-900 mb-6">⚡ 快速操作指南</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="text-center p-4 border border-secondary-200 rounded-lg">
          <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3">
            <svg class="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
            </svg>
          </div>
          <h3 class="font-medium text-secondary-900 mb-2">在编辑器中打开</h3>
          <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs mb-2">
            <code>code /path/to/project</code>
          </div>
          <p class="text-xs text-secondary-500">使用 VS Code 打开项目</p>
        </div>

        <div class="text-center p-4 border border-secondary-200 rounded-lg">
          <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3">
            <svg class="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
            </svg>
          </div>
          <h3 class="font-medium text-secondary-900 mb-2">打开项目目录</h3>
          <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs mb-2">
            <code>open /path/to/project</code>
          </div>
          <p class="text-xs text-secondary-500">在文件管理器中打开</p>
        </div>

        <div class="text-center p-4 border border-secondary-200 rounded-lg">
          <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3">
            <svg class="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </div>
          <h3 class="font-medium text-secondary-900 mb-2">项目配置</h3>
          <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs mb-2">
            <code>astro-zero config --help</code>
          </div>
          <p class="text-xs text-secondary-500">查看配置选项</p>
        </div>
      </div>
    </div>

    <!-- 项目生命周期管理指南 -->
    <div class="bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-6">
      <h2 class="text-xl font-semibold text-secondary-900 mb-6">📈 项目生命周期管理指南</h2>
      
      <p class="text-sm text-secondary-600 mb-6">
        从创意到上线的完整工作流程，每个阶段都有明确的目标和最佳实践指导
      </p>

      <!-- 生命周期阶段导航 -->
      <div class="mb-6">
        <div class="flex flex-wrap gap-2">
          <button 
            onclick="showLifecyclePhase('planning')"
            class="lifecycle-phase-btn px-3 py-2 text-sm rounded-md border border-emerald-200 bg-white hover:bg-emerald-50 transition-colors"
            data-phase="planning"
          >
            💡 规划阶段
          </button>
          <button 
            onclick="showLifecyclePhase('development')"
            class="lifecycle-phase-btn px-3 py-2 text-sm rounded-md border border-emerald-200 bg-white hover:bg-emerald-50 transition-colors"
            data-phase="development"
          >
            🔨 开发阶段
          </button>
          <button 
            onclick="showLifecyclePhase('testing')"
            class="lifecycle-phase-btn px-3 py-2 text-sm rounded-md border border-emerald-200 bg-white hover:bg-emerald-50 transition-colors"
            data-phase="testing"
          >
            🧪 测试阶段
          </button>
          <button 
            onclick="showLifecyclePhase('deployment')"
            class="lifecycle-phase-btn px-3 py-2 text-sm rounded-md border border-emerald-200 bg-white hover:bg-emerald-50 transition-colors"
            data-phase="deployment"
          >
            🚀 部署阶段
          </button>
          <button 
            onclick="showLifecyclePhase('maintenance')"
            class="lifecycle-phase-btn px-3 py-2 text-sm rounded-md border border-emerald-200 bg-white hover:bg-emerald-50 transition-colors"
            data-phase="maintenance"
          >
            🔧 维护阶段
          </button>
        </div>
      </div>

      <!-- 生命周期阶段内容 -->
      <div id="lifecyclePhaseContent" class="bg-white rounded-lg border border-emerald-200 p-6">
        <!-- 规划阶段 -->
        <div id="phase-planning" class="lifecycle-phase-content">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-3">
              <span class="text-xl">💡</span>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-secondary-900">规划阶段 - 项目立项与设计</h3>
              <p class="text-sm text-secondary-600">明确需求，制定技术方案，设计项目架构</p>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">关键任务清单</h4>
              <div class="space-y-2">
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled checked>
                  <span class="text-sm">明确项目目标和用户需求</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">选择合适的项目模板</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">设计信息架构和页面结构</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">准备设计素材和内容资产</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">制定开发时间计划</span>
                </label>
              </div>
            </div>
            
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">推荐命令</h4>
              <div class="space-y-3">
                <div>
                  <p class="text-xs text-secondary-500 mb-1">创建项目</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>astro-zero create my-project --template base</code>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-secondary-500 mb-1">配置品牌信息</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>astro-zero config brand</code>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
            <h5 class="font-medium text-yellow-800 mb-2">💡 阶段提示</h5>
            <p class="text-sm text-yellow-700">
              规划阶段是整个项目的基础，花时间做好需求分析和架构设计能避免后期大量返工。
              建议使用思维导图或原型工具来理清项目结构。
            </p>
          </div>
        </div>

        <!-- 开发阶段 -->
        <div id="phase-development" class="lifecycle-phase-content hidden">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
              <span class="text-xl">🔨</span>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-secondary-900">开发阶段 - 功能实现与迭代</h3>
              <p class="text-sm text-secondary-600">编写代码，实现功能，持续集成和版本控制</p>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">开发工作流</h4>
              <div class="space-y-2">
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">设置开发环境和工具链</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">实现核心功能模块</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">集成第三方服务和API</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">响应式设计和样式优化</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">性能优化和代码重构</span>
                </label>
              </div>
            </div>
            
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">常用命令</h4>
              <div class="space-y-3">
                <div>
                  <p class="text-xs text-secondary-500 mb-1">启动开发服务器</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>npm run dev</code>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-secondary-500 mb-1">代码检查和格式化</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>npm run lint && npm run format</code>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-secondary-500 mb-1">Git 提交最佳实践</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>git add . && git commit -m "feat: add new feature"</code>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <h5 class="font-medium text-blue-800 mb-2">🔨 开发提示</h5>
            <p class="text-sm text-blue-700">
              保持小步快跑的开发节奏，频繁提交代码。使用功能分支进行开发，确保主分支始终可用。
              定期备份重要代码，关注代码质量和文档完善。
            </p>
          </div>
        </div>

        <!-- 测试阶段 -->
        <div id="phase-testing" class="lifecycle-phase-content hidden">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3">
              <span class="text-xl">🧪</span>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-secondary-900">测试阶段 - 质量保证与验证</h3>
              <p class="text-sm text-secondary-600">功能测试，性能优化，用户体验验证</p>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">测试检查清单</h4>
              <div class="space-y-2">
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">功能完整性测试</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">跨浏览器兼容性测试</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">移动设备响应式测试</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">SEO和可访问性检查</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">性能和加载速度优化</span>
                </label>
              </div>
            </div>
            
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">测试工具</h4>
              <div class="space-y-3">
                <div>
                  <p class="text-xs text-secondary-500 mb-1">构建生产版本</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>npm run build</code>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-secondary-500 mb-1">本地预览测试</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>npm run preview</code>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-secondary-500 mb-1">Lighthouse 性能分析</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>lighthouse http://localhost:4321</code>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
            <h5 class="font-medium text-green-800 mb-2">🧪 测试提示</h5>
            <p class="text-sm text-green-700">
              测试是确保项目质量的关键环节。建议在多种设备和浏览器中进行测试，
              使用自动化工具提高测试效率。Lighthouse 分数应保持在 90 分以上。
            </p>
          </div>
        </div>

        <!-- 部署阶段 -->
        <div id="phase-deployment" class="lifecycle-phase-content hidden">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
              <span class="text-xl">🚀</span>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-secondary-900">部署阶段 - 项目上线发布</h3>
              <p class="text-sm text-secondary-600">配置部署环境，发布项目，设置域名和监控</p>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">部署准备</h4>
              <div class="space-y-2">
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">选择部署平台和域名</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">配置环境变量和构建设置</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">设置自动化部署流程</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">配置 HTTPS 和安全设置</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">设置错误监控和分析</span>
                </label>
              </div>
            </div>
            
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">部署平台</h4>
              <div class="space-y-3">
                <div class="p-3 border border-secondary-200 rounded-lg">
                  <h5 class="font-medium text-secondary-900 mb-1">GitHub Pages</h5>
                  <p class="text-xs text-secondary-600 mb-2">免费静态托管，与 GitHub 深度集成</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>git push origin main</code>
                  </div>
                </div>
                <div class="p-3 border border-secondary-200 rounded-lg">
                  <h5 class="font-medium text-secondary-900 mb-1">Netlify / Vercel</h5>
                  <p class="text-xs text-secondary-600 mb-2">专业静态托管，自动化部署</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>netlify deploy --prod --dir=dist</code>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-purple-50 border border-purple-200 rounded-lg">
            <h5 class="font-medium text-purple-800 mb-2">🚀 部署提示</h5>
            <p class="text-sm text-purple-700">
              选择合适的部署平台很重要。GitHub Pages 适合个人项目，Netlify/Vercel 提供更多专业功能。
              确保设置好自动化部署，让每次代码推送都能自动更新网站。
            </p>
          </div>
        </div>

        <!-- 维护阶段 -->
        <div id="phase-maintenance" class="lifecycle-phase-content hidden">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3">
              <span class="text-xl">🔧</span>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-secondary-900">维护阶段 - 持续优化与更新</h3>
              <p class="text-sm text-secondary-600">内容更新，性能监控，功能迭代和安全维护</p>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">维护任务</h4>
              <div class="space-y-2">
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">定期更新内容和资讯</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">监控网站性能和可用性</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">更新依赖包和安全补丁</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">分析用户反馈和使用数据</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2" disabled>
                  <span class="text-sm">SEO 持续优化</span>
                </label>
              </div>
            </div>
            
            <div class="space-y-4">
              <h4 class="font-medium text-secondary-900">维护工具</h4>
              <div class="space-y-3">
                <div>
                  <p class="text-xs text-secondary-500 mb-1">检查依赖更新</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>npm outdated && npm update</code>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-secondary-500 mb-1">安全漏洞扫描</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>npm audit && npm audit fix</code>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-secondary-500 mb-1">备份重要数据</p>
                  <div class="bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
                    <code>git push --all origin</code>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg">
            <h5 class="font-medium text-orange-800 mb-2">🔧 维护提示</h5>
            <p class="text-sm text-orange-700">
              维护是项目长期成功的关键。建立定期维护计划，及时响应用户反馈，
              保持技术栈的更新。好的维护习惯能让项目持续发挥价值。
            </p>
          </div>
        </div>
      </div>

      <!-- 基于项目状态的智能推荐 -->
      <div id="lifecycleRecommendations" class="mt-6 p-4 bg-emerald-50 border border-emerald-200 rounded-lg">
        <h4 class="font-medium text-emerald-800 mb-3">🎯 基于当前项目的阶段建议</h4>
        <div id="lifecycleRecommendationsContent" class="text-sm text-emerald-700">
          <!-- 将根据项目状态动态生成建议 -->
          <p>正在分析您的项目状态，为您提供个性化的阶段建议...</p>
        </div>
      </div>
    </div>

    <!-- GitHub Pages 部署指南 -->
    <div class="bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6">
      <h2 class="text-xl font-semibold text-secondary-900 mb-4">🚀 GitHub Pages 部署指南</h2>
      
      <div class="space-y-4">
        <div class="flex items-start">
          <div class="flex-shrink-0 w-6 h-6 bg-purple-600 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3 mt-0.5">
            1
          </div>
          <div>
            <h3 class="font-medium text-secondary-900">配置 Astro 为静态输出</h3>
            <p class="text-sm text-secondary-600 mt-1">确保 astro.config.mjs 中设置了 <code class="bg-secondary-200 px-1 rounded">output: 'static'</code></p>
          </div>
        </div>

        <div class="flex items-start">
          <div class="flex-shrink-0 w-6 h-6 bg-purple-600 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3 mt-0.5">
            2
          </div>
          <div>
            <h3 class="font-medium text-secondary-900">设置 GitHub Actions</h3>
            <p class="text-sm text-secondary-600 mt-1">创建 <code class="bg-secondary-200 px-1 rounded">.github/workflows/deploy.yml</code> 用于自动部署</p>
          </div>
        </div>

        <div class="flex items-start">
          <div class="flex-shrink-0 w-6 h-6 bg-purple-600 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3 mt-0.5">
            3
          </div>
          <div>
            <h3 class="font-medium text-secondary-900">推送代码到 GitHub</h3>
            <p class="text-sm text-secondary-600 mt-1">每次推送到主分支时自动触发构建和部署</p>
          </div>
        </div>
      </div>

      <div class="mt-6 p-4 bg-white rounded-lg border border-purple-200">
        <h4 class="font-medium text-secondary-900 mb-2">示例 GitHub Actions 配置:</h4>
        <div class="bg-secondary-900 text-green-400 p-3 rounded-md font-mono text-xs overflow-x-auto">
          <pre><code>name: Deploy to GitHub Pages
on: push: branches: [ main ]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci && npm run build
      - uses: actions/deploy-pages@v1</code></pre>
        </div>
      </div>
    </div>

    <!-- 返回链接 -->
    <div class="text-center">
      <a 
        href="/projects"
        class="inline-flex items-center px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-medium transition-colors"
      >
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        返回项目列表
      </a>
    </div>
  </div>
</DashboardLayout>

<script>
  // 复制命令到剪贴板
  window.copyCommand = async function(command: string) {
    try {
      await navigator.clipboard.writeText(command);
      
      // 显示复制成功提示
      const notification = document.createElement('div');
      notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
      notification.textContent = '命令已复制到剪贴板';
      document.body.appendChild(notification);
      
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 2000);
    } catch (err) {
      console.error('复制失败:', err);
    }
  };

  // 智能命令构建器相关变量
  let selectedProjectType = 'base';
  let projectName = 'my-awesome-project';
  let deployTarget = 'github-pages';

  // 项目状态追踪变量
  let globalProjectStats: any = null;
  let recentProjects: any[] = [];
  let isProjectDataLoaded: boolean = false;

  // 选择项目类型
  window.selectProjectType = function(type: string) {
    selectedProjectType = type;
    
    // 更新按钮状态
    document.querySelectorAll('.project-type-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    document.querySelector(`[data-type="${type}"]`)?.classList.add('active');
    
    window.updateCommands();
  };

  // 更新命令显示
  window.updateCommands = function() {
    const nameInput = document.getElementById('projectName') as HTMLInputElement;
    const deploySelect = document.getElementById('deployTarget') as HTMLSelectElement;
    
    if (nameInput) projectName = nameInput.value || 'my-awesome-project';
    if (deploySelect) deployTarget = deploySelect.value;
    
    // 更新创建命令
    const createCmd = document.getElementById('createCommand');
    if (createCmd) {
      createCmd.innerHTML = `<code>astro-zero create ${projectName} --template ${selectedProjectType}</code>`;
    }
    
    // 更新开发命令
    const devCmd = document.getElementById('devCommand');
    if (devCmd) {
      devCmd.innerHTML = `<code>cd ${projectName} && npm run dev</code>`;
    }
    
    // 更新部署命令
    const deployCmd = document.getElementById('deployCommand');
    if (deployCmd) {
      let deployCommand = 'npm run build';
      if (deployTarget === 'github-pages') {
        deployCommand += ' && git add dist && git commit -m "Deploy" && git push origin main';
      } else if (deployTarget === 'netlify') {
        deployCommand += ' && netlify deploy --prod --dir=dist';
      } else if (deployTarget === 'vercel') {
        deployCommand += ' && vercel --prod';
      }
      deployCmd.innerHTML = `<code>${deployCommand}</code>`;
    }
    
    updateTypeSpecificTips();
    
    // 更新智能建议（如果项目数据已加载）
    if (isProjectDataLoaded) {
      updateSmartSuggestions();
    }
  };

  // 更新项目类型特定提示
  function updateTypeSpecificTips() {
    const tipsElement = document.getElementById('typeSpecificTips');
    if (!tipsElement) return;
    
    const tips = {
      base: {
        title: '💡 基础站点提示:',
        content: '适合企业官网、产品展示。建议关注SEO优化和页面加载速度。支持多页面架构，可以添加联系表单、团队介绍等功能模块。'
      },
      blog: {
        title: '📝 博客站点提示:',
        content: '包含完整的内容管理系统。支持Markdown文档、分类标签、RSS订阅。建议设置定期备份，关注文章SEO优化。'
      },
      tool: {
        title: '🔧 在线工具提示:',
        content: '交互式工具展示平台。支持React组件集成、API调用、数据可视化。建议添加使用说明和错误处理机制。'
      }
    };
    
    const tip = (tips as any)[selectedProjectType];
    tipsElement.innerHTML = `
      <h4 class="font-medium text-blue-800 mb-2">${tip.title}</h4>
      <p class="text-sm text-blue-700">${tip.content}</p>
    `;
  }

  // 复制生成的命令到剪贴板
  window.copyGeneratedCommand = async function(commandType: string) {
    let command = '';
    
    if (commandType === 'create') {
      command = `astro-zero create ${projectName} --template ${selectedProjectType}`;
    } else if (commandType === 'dev') {
      command = `cd ${projectName} && npm run dev`;
    } else if (commandType === 'deploy') {
      command = 'npm run build';
      if (deployTarget === 'github-pages') {
        command += ' && git add dist && git commit -m "Deploy" && git push origin main';
      } else if (deployTarget === 'netlify') {
        command += ' && netlify deploy --prod --dir=dist';
      } else if (deployTarget === 'vercel') {
        command += ' && vercel --prod';
      }
    }
    
    try {
      await navigator.clipboard.writeText(command);
      
      // 显示复制成功提示
      const notification = document.createElement('div');
      notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
      notification.textContent = '命令已复制到剪贴板';
      document.body.appendChild(notification);
      
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 2000);
    } catch (err) {
      console.error('复制失败:', err);
    }
  };

  // 加载项目状态数据（模拟异步API调用）
  async function loadProjectStatus() {
    try {
      // 模拟项目数据（在实际环境中，这将调用ProjectStore API）
      const mockProjectData = generateMockProjectData();
      
      // 更新项目统计
      updateProjectStats(mockProjectData.stats);
      
      // 更新最近项目列表
      updateRecentProjects(mockProjectData.recent);
      
      // 标记数据已加载
      isProjectDataLoaded = true;
      
      // 更新智能建议
      updateSmartSuggestions();
      
    } catch (error) {
      console.error('Failed to load project status:', error);
      showProjectStatusError();
    }
  }

  // 生成模拟项目数据（演示用）
  function generateMockProjectData() {
    // 检查是否是首次访问
    const hasExistingProjects = Math.random() > 0.3; // 70%概率有现有项目
    
    if (!hasExistingProjects) {
      return {
        stats: { total: 0, active: 0, recent: 0, draft: 0 },
        recent: []
      };
    }
    
    const total = Math.floor(Math.random() * 10) + 1;
    const active = Math.floor(total * 0.7);
    const recent = Math.floor(active * 0.6);
    const draft = total - active;
    
    const recentProjects = [];
    for (let i = 0; i < Math.min(recent, 3); i++) {
      recentProjects.push({
        name: `project-${i + 1}`,
        type: ['base', 'blog', 'tool'][Math.floor(Math.random() * 3)],
        status: 'active',
        updatedAt: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString()
      });
    }
    
    return {
      stats: { total, active, recent, draft },
      recent: recentProjects
    };
  }

  // 更新项目统计显示
  function updateProjectStats(stats: any) {
    const statusLoading = document.getElementById('statusLoading');
    const projectStats = document.getElementById('projectStats');
    const noProjects = document.getElementById('noProjects');
    const recentProjectsList = document.getElementById('recentProjectsList');
    
    // 隐藏加载动画
    statusLoading?.classList.add('hidden');
    
    if (stats.total === 0) {
      // 显示无项目状态
      noProjects?.classList.remove('hidden');
    } else {
      // 显示项目统计
      projectStats?.classList.remove('hidden');
      recentProjectsList?.classList.remove('hidden');
      
      // 更新统计数字
      document.getElementById('totalProjects')!.textContent = stats.total;
      document.getElementById('activeProjects')!.textContent = stats.active;
      document.getElementById('recentProjects')!.textContent = stats.recent;
      document.getElementById('draftProjects')!.textContent = stats.draft;
    }
    
    // 保存统计数据
    globalProjectStats = stats;
  }

  // 更新最近项目列表
  function updateRecentProjects(projects: any[]) {
    const container = document.getElementById('recentProjectsContainer');
    if (!container) return;
    
    container.innerHTML = '';
    
    projects.forEach((project: any) => {
      const projectEl = document.createElement('div');
      projectEl.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
      
      const timeSince = getTimeSince(new Date(project.updatedAt));
      const typeIcon = getProjectTypeIcon(project.type);
      
      projectEl.innerHTML = `
        <div class="flex items-center">
          <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
            ${typeIcon}
          </div>
          <div>
            <h4 class="font-medium text-secondary-900">${project.name}</h4>
            <p class="text-xs text-secondary-500">${timeSince}前更新</p>
          </div>
        </div>
        <div class="flex items-center space-x-2">
          <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">${project.type}</span>
          <button 
            onclick="copyCommand('cd ${project.name} && npm run dev')"
            class="text-blue-600 hover:text-blue-800 text-xs"
            title="启动开发服务器"
          >
            启动
          </button>
        </div>
      `;
      
      container.appendChild(projectEl);
    });
    
    // 保存最近项目数据
    recentProjects = projects;
  }

  // 更新智能建议
  function updateSmartSuggestions() {
    const suggestionsEl = document.getElementById('smartSuggestions');
    const contentEl = document.getElementById('suggestionsContent');
    
    if (!isProjectDataLoaded || !globalProjectStats) return;
    
    const suggestions = generateSmartSuggestions();
    
    if (suggestions.length > 0) {
      suggestionsEl!.classList.remove('hidden');
      contentEl!.innerHTML = suggestions.map(s => `<p class="mb-2">• ${s}</p>`).join('');
    }
  }

  // 生成智能建议
  function generateSmartSuggestions() {
    const suggestions: string[] = [];
    
    if (!globalProjectStats) return suggestions;
    
    // 基于项目数量的建议
    if (globalProjectStats.total === 0) {
      suggestions.push('您还没有任何项目，建议从基础站点模板开始');
    } else if (globalProjectStats.total < 3) {
      suggestions.push('尝试不同的项目类型来丰富您的作品集');
    }
    
    // 基于项目类型的建议
    if (selectedProjectType === 'blog' && globalProjectStats.total > 0) {
      suggestions.push('博客项目建议定期更新内容，保持读者活跃度');
    } else if (selectedProjectType === 'tool' && recentProjects.length > 0) {
      suggestions.push('在线工具项目可以考虑添加数据可视化功能');
    }
    
    // 基于项目状态的建议
    if (globalProjectStats.draft > 0) {
      suggestions.push(`您有 ${globalProjectStats.draft} 个草稿项目，考虑完善并发布它们`);
    }
    
    if (globalProjectStats.recent === 0 && globalProjectStats.total > 0) {
      suggestions.push('最近没有项目活动，建议检查现有项目的维护状态');
    }
    
    return suggestions;
  }

  // 辅助函数
  function getTimeSince(date: Date) {
    const now = new Date();
    const diffMs = now.getTime() - date.getTime();
    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
    
    if (diffDays === 0) return '今天';
    if (diffDays === 1) return '1天';
    if (diffDays < 7) return `${diffDays}天`;
    if (diffDays < 30) return `${Math.floor(diffDays / 7)}周`;
    return `${Math.floor(diffDays / 30)}个月`;
  }

  function getProjectTypeIcon(type: string) {
    const icons = {
      base: '<svg class="w-4 h-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>',
      blog: '<svg class="w-4 h-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>',
      tool: '<svg class="w-4 h-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>'
    };
    return (icons as any)[type] || icons.base;
  }

  function showProjectStatusError() {
    const statusLoading = document.getElementById('statusLoading');
    statusLoading!.innerHTML = `
      <div class="text-center py-8">
        <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-3">
          <svg class="w-6 h-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.664-.833-2.464 0L3.35 16.5c-.77.833.192 2.5 1.732 2.5z" />
          </svg>
        </div>
        <p class="text-sm text-red-600">无法加载项目状态</p>
        <button onclick="loadProjectStatus()" class="text-xs text-blue-600 hover:text-blue-800 mt-2">重试</button>
      </div>
    `;
  }

  // 滚动到命令构建器
  window.scrollToCommandBuilder = function() {
    const builder = document.querySelector('#generatedCommands');
    if (builder) {
      builder.scrollIntoView({ behavior: 'smooth' });
    }
  };

  // 生命周期管理相关变量
  let currentLifecyclePhase = 'planning';

  // 显示生命周期阶段
  window.showLifecyclePhase = function(phase: string) {
    currentLifecyclePhase = phase;
    
    // 更新按钮状态
    document.querySelectorAll('.lifecycle-phase-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    document.querySelector(`[data-phase="${phase}"]`)?.classList.add('active');
    
    // 隐藏所有阶段内容
    document.querySelectorAll('.lifecycle-phase-content').forEach(content => {
      content.classList.add('hidden');
    });
    
    // 显示当前阶段内容
    const currentContent = document.getElementById(`phase-${phase}`);
    if (currentContent) {
      currentContent.classList.remove('hidden');
    }
    
    // 更新智能推荐
    updateLifecycleRecommendations();
  };

  // 更新生命周期智能推荐
  function updateLifecycleRecommendations() {
    const recommendationsEl = document.getElementById('lifecycleRecommendationsContent');
    if (!recommendationsEl) return;
    
    const recommendations = generateLifecycleRecommendations();
    
    if (recommendations.length > 0) {
      recommendationsEl.innerHTML = recommendations.map(r => {
        const commandHtml = r.command ? 
          `<div class="mt-2 bg-secondary-900 text-green-400 p-2 rounded-md font-mono text-xs">
            <code>${r.command}</code>
          </div>` : '';
        return `<div class="mb-3 p-3 bg-white border border-emerald-200 rounded-lg">
          <h5 class="font-medium text-emerald-800 mb-1">${r.title}</h5>
          <p class="text-sm text-emerald-700">${r.content}</p>
          ${commandHtml}
        </div>`;
      }).join('');
    } else {
      recommendationsEl.innerHTML = '<p>当前阶段暂无特定建议。</p>';
    }
  }

  // 生成生命周期推荐
  function generateLifecycleRecommendations() {
    const recommendations = [];
    
    // 基于当前选择的生命周期阶段
    const phaseRecommendations = {
      planning: [
        {
          title: '🎯 项目目标明确化',
          content: '在开始编码前，确保项目的核心价值主张清晰。建议写下一句话描述项目的核心功能。',
          command: null
        },
        {
          title: '📝 品牌信息准备',
          content: '配置个人或企业品牌信息，确保所有项目都有一致的品牌形象。',
          command: 'astro-zero config brand'
        }
      ],
      development: [
        {
          title: '🔄 持续集成实践',
          content: '建立良好的代码提交习惯，每个功能完成后及时提交代码，便于回滚和协作。',
          command: 'git add . && git commit -m "feat: implement feature"'
        },
        {
          title: '⚡ 开发效率提升',
          content: '使用热重载功能进行开发，实时预览更改效果，提高开发效率。',
          command: 'npm run dev'
        }
      ],
      testing: [
        {
          title: '📊 性能基准测试',
          content: '使用 Lighthouse 测试项目性能，确保各项指标达到 90 分以上的标准。',
          command: 'lighthouse http://localhost:4321 --view'
        },
        {
          title: '🔍 构建验证',
          content: '在部署前构建项目并本地预览，确保生产版本正常工作。',
          command: 'npm run build && npm run preview'
        }
      ],
      deployment: [
        {
          title: '🚀 自动化部署设置',
          content: '配置 GitHub Actions 或其他 CI/CD 工具，实现代码推送后自动部署。',
          command: null
        },
        {
          title: '🔒 安全配置',
          content: '确保 HTTPS 配置正确，设置适当的安全头信息，保护网站安全。',
          command: null
        }
      ],
      maintenance: [
        {
          title: '🔄 依赖更新',
          content: '定期检查并更新项目依赖，修复安全漏洞，保持项目健康状态。',
          command: 'npm audit && npm update'
        },
        {
          title: '📈 性能监控',
          content: '设置网站性能监控，及时发现和解决性能问题，提升用户体验。',
          command: null
        }
      ]
    };
    
    const currentRecommendations = (phaseRecommendations as any)[currentLifecyclePhase] || [];
    recommendations.push(...currentRecommendations);
    
    // 基于项目状态添加额外建议
    if (isProjectDataLoaded && globalProjectStats) {
      if (globalProjectStats.total === 0 && currentLifecyclePhase === 'planning') {
        recommendations.unshift({
          title: '🌟 首个项目建议',
          content: '这是您的第一个项目！建议从基础站点模板开始，熟悉完整的开发流程。',
          command: `astro-zero create ${projectName} --template base`
        });
      }
      
      if (globalProjectStats.draft > 0 && currentLifecyclePhase === 'maintenance') {
        recommendations.push({
          title: '📂 草稿项目处理',
          content: `您有 ${globalProjectStats.draft} 个草稿项目，建议完善并发布它们，或者归档不需要的项目。`,
          command: 'astro-zero list --status draft'
        });
      }
    }
    
    return recommendations;
  }

  // 页面加载完成后初始化
  document.addEventListener('DOMContentLoaded', function() {
    // 默认选择基础站点
    window.selectProjectType('base');
    
    // 默认显示规划阶段
    window.showLifecyclePhase('planning');
    
    // 加载项目状态（延迟2秒模拟异步加载）
    setTimeout(() => {
      loadProjectStatus();
    }, 2000);
  });
</script>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 智能命令构建器样式 */
  .project-type-btn {
    transition: all 0.2s ease-in-out;
  }

  .project-type-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .project-type-btn.active {
    border-color: #4299e1;
    background-color: #e0f2fe;
    font-weight: bold;
  }

  /* 生命周期阶段按钮样式 */
  .lifecycle-phase-btn {
    transition: all 0.2s ease-in-out;
  }

  .lifecycle-phase-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .lifecycle-phase-btn.active {
    border-color: #10b981;
    background-color: #d1fae5;
    font-weight: bold;
  }
</style> 